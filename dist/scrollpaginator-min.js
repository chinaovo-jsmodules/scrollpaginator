!function(t,o){"function"==typeof define&&define.amd?define(["$"],o):"object"==typeof exports?module.exports=o():t.scrollPaginator=o(window.Zepto||window.jQuery||$)}(this,function(t){var o=function(t,o){this.init(t,o)};return o.prototype={version:"0.1.0",author:"OvO",init:function(o,i){this.$element=t(o),this.$scrollWin=t("<div>").appendTo(this.$element.parent()),this.$element.appendTo(this.$scrollWin);this.$element.attr("id");this.currentPage=1,this.setOptions(i)},setOptions:function(o){this.options=t.extend({},this.options||t.fn.scrollPaginator.defaults,o),this.height=parseInt(this.options.height,10),o&&"undefined"!=typeof o.currentPage&&this.setCurrentPage(o.currentPage),this.$scrollWin.css({height:this.height+"px","overflow-y":"auto",display:"block",padding:"0px"}),this.height>this.$element.height()&&this.$element.css({"min-height":this.height+25+"px",display:"block",overflow:"hidden",margin:"0px"}),this.$scrollWin.scrollTop(0),this.bindEvent()},setCurrentPage:function(o){var i=parseInt(o,10);1==i&&(this.$element.empty(),this.$scrollWin.scrollTop(0),t(".loadmsg",this.$scrollWin).remove()),this.currentPage=i},onScrollBottomed:function(t,o){this.haveMsg()?this.showMsg():"function"==typeof this.options.onScrollBottomed&&this.options.onScrollBottomed(++this.currentPage)},haveData:function(o){0==o&&(this.currentPage--,this.showMsg()),1==o&&t(".loadmsg",this.$scrollWin).remove()},haveMsg:function(){var o=t(".loadmsg",this.$scrollWin);return!(o.length<1)},showMsg:function(){var o=this.$scrollWin,i=(o.scrollTop(),t(".loadmsg",this.$scrollWin));i.length<1?(i=t("<div class='loadmsg'>").css({"text-align":"center",padding:"5px;",clear:"both"}).text("已经到底了"),i.appendTo(this.$scrollWin)):i.show(),setTimeout(function(){i.hide(),o.scrollTop(o.scrollTop()-1)},3e3)},bindEvent:function(){var o=this,i=this.$element;this.$scrollWin.unbind("scroll"),this.$scrollWin.bind("scroll",function(){var n=t(this).scrollTop(),e=i.height(),s=t(this).height();n+s==e&&o.onScrollBottomed()})}},t.fn.scrollPaginator=function(i){var n=null;return t(this).each(function(e,s){var l=t(s),r=l.data("scrollPaginator"),h="object"!=typeof i?null:i;return r?void(n=r.setOptions(i)):(r=new o(this,h),l=t(r.$element),void l.data("scrollPaginator",r))}),n},t.fn.scrollPaginator.defaults={height:300,onScrollBottomed:null},t.fn.scrollPaginator.Constructor=o,o});