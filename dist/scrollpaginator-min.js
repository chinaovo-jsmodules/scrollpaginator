!function(t,e){"function"==typeof define&&define.amd?define(["$"],e):"object"==typeof exports?module.exports=e():t.scrollPaginator=e(window.Zepto||window.jQuery||$)}(this,function(t){var e=function(t,e){this.init(t,e)};return e.prototype={version:"0.1.0",author:"OvO",init:function(e,i){this.$element=t(e),this.$scrollWin=t("<div>").appendTo(this.$element.parent()),this.$element.appendTo(this.$scrollWin);this.$element.attr("id");this.currentPage=1,this.setOptions(i)},setOptions:function(e){this.options=t.extend({},this.options||t.fn.scrollPaginator.defaults,e),this.height=parseInt(this.options.height,10),e&&"undefined"!=typeof e.currentPage&&this.setCurrentPage(e.currentPage),this.height>this.$element.height()&&this.$element.css({"min-height":this.height+10+"px"}),this.$scrollWin.css({height:this.height+"px","overflow-y":"auto"}).scrollTop(0),this.bindEvent()},setCurrentPage:function(t){this.currentPage=parseInt(t,10)},onScrollBottomed:function(e,i){var n=t(".loadmsg",this.$scrollWin);n.length<1?"function"==typeof this.options.onScrollBottomed&&this.options.onScrollBottomed(++this.currentPage):(n.show(),setTimeout(function(){n.hide()},5e3))},haveData:function(e){if(0==e){this.currentPage--;var i=t(".loadmsg",this.$scrollWin);i.length<1?(i=t("<div class='loadmsg'>").css({"text-align":"center",padding:"5px;"}).text("已经到底了"),i.appendTo(this.$scrollWin)):i.show(),setTimeout(function(){i.hide()},5e3)}},bindEvent:function(){var e=this,i=this.$element;this.$scrollWin.unbind("scroll"),this.$scrollWin.bind("scroll",function(){var n=t(this).scrollTop(),o=i.height(),s=t(this).height();n+s>o&&e.onScrollBottomed()})}},t.fn.scrollPaginator=function(i){var n=arguments,o=null;return t(this).each(function(s,r){var l=t(r),h=l.data("scrollPaginator"),a="object"!=typeof i?null:i;if(!h)return h=new e(this,a),l=t(h.$element),void l.data("scrollPaginator",h);if("string"==typeof i){if(!h[i])throw"Method "+i+" does not exist";o=h[i].apply(h,Array.prototype.slice.call(n,1))}else o=h.setOptions(i)}),o},t.fn.scrollPaginator.defaults={height:300,onScrollBottomed:null},t.fn.scrollPaginator.Constructor=e,e});